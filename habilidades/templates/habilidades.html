{% extends "template.html" %}
{% load staticfiles %}
{% block head %}
	<title>Habilidades | OportunidApp </title>
{% endblock %}
{% block content %}
<div class="page-header">
	<h2 class="hbl-t">Habilidades <a href="#" class="btn btn-primary" id="hbl">Nueva</a></h2>
</div>
<div class="row">
	<div class="col-sm-12">
		<div class="well" style="display:none"> 
			<form id="nueva-habilidad-form" method="post" enctype='multipart/form-data'>
				<h4>Nueva Habilidad</h4>
				<div class="form-group">
					{{ form.as_p }}
				</div>
				<div class="text-right">
					<a href="" class="btn btn-danger" id="cancel">Cancelar</a>
					<input type="submit" value="Agregar + " class="btn btn-primary">
				</div>
				<ul class="list-inline">
				</ul>
			</form>
		</div>
	</div>
</div>
<div class="row space-tab">
	<ul class="nav nav-tabs" id="tabs" data-tabs="tabs">
		<li role="presentation" class="active" id="btn-habilidades-activas">
			<a href="#activas" data-toggle="tab">Activas <span class="n-red label-danger">5</span></a>
		</li>
		<li role="presentation" class="" id="btn-habilidades-noActivas">
			<a href="#inactivas" data-toggle="tab">Inactivas <span class="n-red label-danger">5</span></a>
		</li>
	</ul>
</div>
<ul id="listul">
</ul>
<p id="foo"></p>
<div class="row">
	<!-- Comienzo de contenido tab -->
	<div id="my-tab-content" class="tab-content">
		<div class="tab-pane active" id="activas">
			{% if habilidades %}
				{% for habilidad in habilidades %}
					<div class="col-md-12">
						<div class="label-category label-description text-center">
							<strong class="desc3">{{ habilidad.categoria }}</strong>
						</div>
					</div>
					<div class="habilidad-item">
						<div className="col-sm-12">
							<div class="row panel panel-default">	
								<div class="col-sm-12 col-md-4 div-align">
									<img src="{{ habilidad.foto.url }}" class="desc-img" alt="{{ habilidad.nhabilidad }}">
								</div>
								<div class="col-sm-12 col-md-5 div-align">
									<h3>
										<a href="/habilidades/{{ habilidad.slug }}/{{ habilidad.pk }}">
											{{ habilidad.nhabilidad }}
										</a>
									</h3>
									<p>{{ habilidad.descripcion }}</p>
								</div>
								<div class="col-sm-12 col-md-3">
									<div class="text-top text-center col-xs-6 col-sm-4 col-md-12 col-lg-12">
										<div class="label-descp label-warning">
											<i class="glyphicon glyphicon-star desc3"></i>
												{% if habilidad.val_promedio %}
													<span class="desc">Puntuacion: </span>
													<strong class="desc3">{{ habilidad.val_promedio }}</strong>
												{% else %}
													<strong class="desc3">ninguno</strong>
												{% endif %}
											
										</div>
									</div>
									<div class="text-top text-center col-xs-6 col-sm-4 col-md-12 col-lg-12">
										<div class="label-descp label-success">
											<i class="glyphicon glyphicon-th-list desc3"></i> 
												{% if  habilidad.num_solicitudes%}
													<span class="desc">Solicitudes: </span>
													<strong class="desc3">{{ habilidad.num_solicitudes }}</strong>
												{% else %}
													<strong class="desc3">ninguno</strong>
												{% endif %}

										</div>
									</div>
									<div class="text-top text-center col-xs-6 col-sm-4 col-md-12 col-lg-12">
										<div class="label-descp label-danger">
											{% if habilidad.precio %}
												<i class="glyphicon glyphicon-usd desc3"></i> 
												<span class="desc">Precio: </span></a><strong class="desc3">{{ habilidad.precio }}</strong>
											{% else %}
												<span><b>ninguno</b></span>
											{% endif %}
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			{% else %}
				<div class="row text-center">
					<img src="/static/img/not-found.png" class="desc-img">
					<p>No hemos encontrado algo en esta secci√≥n.</p>
				</div>
			{% endif %}
		</div>
		<div class="tab-pane" id="inactivas">
			<h1>Quibo</h1>
		</div>
	</div>
	<!-- Termina contenido tab -->
	<div id="results">
		
	</div>
</div>
{% endblock %}
{% block scripts %}
	<script src="{% static 'jsapp/csrf_load.js' %}"></script>
	<script>/*
		$(function() {
			$('#nueva-habilidad-form').on('submit', function(event){
				event.preventDefault();
				$.ajax({
					url: '{% url 'nuevaHabilidad' %}',
					type: "POST",
					dataType: 'json',
					data: {
						categoria: $('#id_categoria').val(),
						nhabilidad: $('#id_nhabilidad').val(),
						descripcion: $('#id_descripcion').val(),
						precio: $('#id_precio').val(),
					},
					success: function(json){
						console.log(json)
						location.reload();
					},
				});
			});

			$('.well').hide();
			$('#hbl').click(function(event){
				$('.well').show();
				$('#hbl').hide();
				event.preventDefault();
			});
			$('#cancel').click(function(event){
				$("#nueva-habilidad-form").trigger('reset');
				$('.well').hide();
				$('#hbl').show();
				event.preventDefault();
			});
		});
	</script>
{% endblock %}